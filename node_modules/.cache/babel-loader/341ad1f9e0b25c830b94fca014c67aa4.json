{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mkova\\\\react\\\\react-movies\\\\src\\\\components\\\\App.jsx\";\nimport React from \"react\";\nimport { moviesData } from \"../moviesData\";\nimport MovieTabs from './MovieTabs';\nimport MovieItem from \"./MovieItem\";\nimport { API_URL, API_KEY_3, API_KEY_4 } from './api';\nimport Pages from './Pages'; // UI = fn(state, props)\n// App = new React.Component()\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.deleteMovie = movie => {\n      console.log(movie.id);\n      const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\n      console.log(updateMovies); // this.state.movies = updateMovies;\n\n      this.setState({\n        movies: updateMovies\n      });\n    };\n\n    this.addMovieToWillWatch = movie => {\n      const updateMoviesWillWatch = [...this.state.moviesWillWatch];\n      updateMoviesWillWatch.push(movie);\n      this.setState({\n        moviesWillWatch: updateMoviesWillWatch\n      });\n    };\n\n    this.deleteMovieFromWillWatch = movie => {\n      const updateMoviesWillWatch = this.state.moviesWillWatch.filter(item => item.id !== movie.id);\n      this.setState({\n        moviesWillWatch: updateMoviesWillWatch\n      });\n    };\n\n    this.updateSortBy = value => {\n      this.setState({\n        sort_by: value\n      });\n    };\n\n    this.state = {\n      movies: [],\n      moviesWillWatch: [],\n      sort_by: 'popularity.desc',\n      page: '',\n      total_page: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getMovies();\n  }\n\n  getMovies() {\n    fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`).then(response => {\n      console.log(response);\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      console.log(data.results);\n      this.setState({\n        movies: data.results,\n        page: data.page,\n        total_page: data.total_pages\n      });\n      console.log(this.state);\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log('didupdate');\n    console.log(prevProps, prevState);\n    console.log(this.props, this.state);\n\n    if (prevState.sort_by !== this.state.sort_by) {\n      this.getMovies();\n    }\n  }\n\n  render() {\n    console.log(\"render\", this);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MovieTabs, {\n      sort_by: this.state.sort_by,\n      updateSortBy: this.updateSortBy,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, this.state.movies.map(movie => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6 mb-4\",\n        key: movie.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(MovieItem, {\n        data: movie,\n        deleteMovie: this.deleteMovie,\n        addMovieToWillWatch: this.addMovieToWillWatch,\n        deleteMovieFromWillWatch: this.deleteMovieFromWillWatch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }));\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, \"Will Watch: \", this.state.moviesWillWatch.length, \" movies\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"pagination: \", this.state.page), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"list-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, this.state.moviesWillWatch.map(movie => /*#__PURE__*/React.createElement(\"li\", {\n      key: movie.id,\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, movie.title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, movie.vote_average)))))), /*#__PURE__*/React.createElement(Pages, {\n      pages: this.state.page,\n      total_page: this.state.total_page,\n      updatePage: this.updatePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/mkova/react/react-movies/src/components/App.jsx"],"names":["React","moviesData","MovieTabs","MovieItem","API_URL","API_KEY_3","API_KEY_4","Pages","App","Component","constructor","deleteMovie","movie","console","log","id","updateMovies","state","movies","filter","item","setState","addMovieToWillWatch","updateMoviesWillWatch","moviesWillWatch","push","deleteMovieFromWillWatch","updateSortBy","value","sort_by","page","total_page","componentDidMount","getMovies","fetch","then","response","json","data","results","total_pages","componentDidUpdate","prevProps","prevState","props","render","map","length","title","vote_average","updatePage"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAAQC,OAAR,EAAgBC,SAAhB,EAA0BC,SAA1B,QAA0C,OAA1C;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CACA;AAEA;;AAEA,MAAMC,GAAN,SAAkBR,KAAK,CAACS,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,GAAG;AACZ;;AADY,SAYdC,WAZc,GAYAC,KAAK,IAAI;AACrBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,EAAlB;AACA,YAAMC,YAAY,GAAG,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,CAAyBC,IAAI,IAAIA,IAAI,CAACL,EAAL,KAAYH,KAAK,CAACG,EAAnD,CAArB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAYE,YAAZ,EAHqB,CAKrB;;AACA,WAAKK,QAAL,CAAc;AACZH,QAAAA,MAAM,EAAEF;AADI,OAAd;AAGD,KArBa;;AAAA,SAuBdM,mBAvBc,GAuBQV,KAAK,IAAI;AAC7B,YAAMW,qBAAqB,GAAG,CAAC,GAAG,KAAKN,KAAL,CAAWO,eAAf,CAA9B;AACAD,MAAAA,qBAAqB,CAACE,IAAtB,CAA2Bb,KAA3B;AAEA,WAAKS,QAAL,CAAc;AACZG,QAAAA,eAAe,EAAED;AADL,OAAd;AAGD,KA9Ba;;AAAA,SAgCdG,wBAhCc,GAgCad,KAAK,IAAI;AAClC,YAAMW,qBAAqB,GAAG,KAAKN,KAAL,CAAWO,eAAX,CAA2BL,MAA3B,CAC5BC,IAAI,IAAIA,IAAI,CAACL,EAAL,KAAYH,KAAK,CAACG,EADE,CAA9B;AAIA,WAAKM,QAAL,CAAc;AACZG,QAAAA,eAAe,EAAED;AADL,OAAd;AAGD,KAxCa;;AAAA,SAmEhBI,YAnEgB,GAmEDC,KAAK,IAAG;AACrB,WAAKP,QAAL,CAAc;AAACQ,QAAAA,OAAO,EAACD;AAAT,OAAd;AAED,KAtEe;;AAGZ,SAAKX,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,EADG;AAEXM,MAAAA,eAAe,EAAE,EAFN;AAGXK,MAAAA,OAAO,EAAE,iBAHE;AAIXC,MAAAA,IAAI,EAAC,EAJM;AAKXC,MAAAA,UAAU,EAAC;AALA,KAAb;AAOD;;AA+BHC,EAAAA,iBAAiB,GAAE;AACnB,SAAKC,SAAL;AACC;;AACDA,EAAAA,SAAS,GAAE;AACTC,IAAAA,KAAK,CAAE,GAAE9B,OAAQ,2BAA0BC,SAAU,YAAW,KAAKY,KAAL,CAAWY,OAAQ,SAAQ,KAAKZ,KAAL,CAAWa,IAAK,EAAtG,CAAL,CACCK,IADD,CACOC,QAAD,IAAY;AAChBvB,MAAAA,OAAO,CAACC,GAAR,CAAYsB,QAAZ;AACA,aAAOA,QAAQ,CAACC,IAAT,EAAP;AAED,KALD,EAMCF,IAND,CAMOG,IAAD,IAAQ;AACZzB,MAAAA,OAAO,CAACC,GAAR,CAAYwB,IAAZ;AACAzB,MAAAA,OAAO,CAACC,GAAR,CAAYwB,IAAI,CAACC,OAAjB;AACA,WAAKlB,QAAL,CAAc;AAACH,QAAAA,MAAM,EAACoB,IAAI,CAACC,OAAb;AAAqBT,QAAAA,IAAI,EAACQ,IAAI,CAACR,IAA/B;AAAoCC,QAAAA,UAAU,EAACO,IAAI,CAACE;AAApD,OAAd;AACJ3B,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKG,KAAjB;AACG,KAXD;AAYD;;AACDwB,EAAAA,kBAAkB,CAACC,SAAD,EAAWC,SAAX,EAAqB;AACvC9B,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY4B,SAAZ,EAAsBC,SAAtB;AACA9B,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK8B,KAAjB,EAAuB,KAAK3B,KAA5B;;AACA,QAAG0B,SAAS,CAACd,OAAV,KAAoB,KAAKZ,KAAL,CAAWY,OAAlC,EAA0C;AACxC,WAAKI,SAAL;AACD;AAEA;;AAMCY,EAAAA,MAAM,GAAG;AACPhC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB,IAAtB;AACA,wBAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,SAAD;AAAW,MAAA,OAAO,EAAE,KAAKG,KAAL,CAAWY,OAA/B;AACA,MAAA,YAAY,EAAE,KAAKF,YADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CADF,eAKE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKV,KAAL,CAAWC,MAAX,CAAkB4B,GAAlB,CAAsBlC,KAAK,IAAI;AAC9B,0BACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAA4B,QAAA,GAAG,EAAEA,KAAK,CAACG,EAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD;AACE,QAAA,IAAI,EAAEH,KADR;AAEE,QAAA,WAAW,EAAE,KAAKD,WAFpB;AAGE,QAAA,mBAAmB,EAAE,KAAKW,mBAH5B;AAIE,QAAA,wBAAwB,EAAE,KAAKI,wBAJjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAUD,KAXA,CADH,CALF,CADF,eAqBE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAiB,KAAKT,KAAL,CAAWO,eAAX,CAA2BuB,MAA5C,YADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAgB,KAAK9B,KAAL,CAAWa,IAA3B,CAFF,eAGE;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKb,KAAL,CAAWO,eAAX,CAA2BsB,GAA3B,CAA+BlC,KAAK,iBACnC;AAAI,MAAA,GAAG,EAAEA,KAAK,CAACG,EAAf;AAAmB,MAAA,SAAS,EAAC,iBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIH,KAAK,CAACoC,KAAV,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIpC,KAAK,CAACqC,YAAV,CAFF,CADF,CADD,CADH,CAHF,CArBF,eAmCE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAE,KAAKhC,KAAL,CAAWa,IAAzB;AAA+B,MAAA,UAAU,EAAE,KAAKb,KAAL,CAAWc,UAAtD;AAAkE,MAAA,UAAU,EAAE,KAAKmB,UAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnCF,CADF,CAFF;AA0CD;;AArH+B;;AAwHlC,eAAe1C,GAAf","sourcesContent":["import React from \"react\";\r\nimport { moviesData } from \"../moviesData\";\r\nimport MovieTabs from './MovieTabs'\r\nimport MovieItem from \"./MovieItem\";\r\nimport {API_URL,API_KEY_3,API_KEY_4} from './api'\r\nimport Pages from './Pages'\r\n// UI = fn(state, props)\r\n\r\n// App = new React.Component()\r\n\r\nclass App extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      movies: [],\r\n      moviesWillWatch: [],\r\n      sort_by: 'popularity.desc',\r\n      page:'',\r\n      total_page:''\r\n    };\r\n  }\r\n\r\n  deleteMovie = movie => {\r\n    console.log(movie.id);\r\n    const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\r\n    console.log(updateMovies);\r\n\r\n    // this.state.movies = updateMovies;\r\n    this.setState({\r\n      movies: updateMovies\r\n    });\r\n  };\r\n\r\n  addMovieToWillWatch = movie => {\r\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch];\r\n    updateMoviesWillWatch.push(movie);\r\n\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n  };\r\n\r\n  deleteMovieFromWillWatch = movie => {\r\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(\r\n      item => item.id !== movie.id\r\n    );\r\n\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n  };\r\ncomponentDidMount(){\r\nthis.getMovies();\r\n}\r\ngetMovies(){\r\n  fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`)\r\n  .then((response)=>{\r\n    console.log(response)\r\n    return response.json();\r\n    \r\n  })\r\n  .then((data)=>{\r\n    console.log(data)\r\n    console.log(data.results)\r\n    this.setState({movies:data.results,page:data.page,total_page:data.total_pages})\r\nconsole.log(this.state)\r\n  })\r\n}\r\ncomponentDidUpdate(prevProps,prevState){\r\nconsole.log('didupdate');\r\nconsole.log(prevProps,prevState)\r\nconsole.log(this.props,this.state);\r\nif(prevState.sort_by!==this.state.sort_by){\r\n  this.getMovies();\r\n}\r\n\r\n}\r\nupdateSortBy = value =>{\r\n  this.setState({sort_by:value})\r\n  \r\n}\r\n\r\n  render() {\r\n    console.log(\"render\", this);\r\n    return (\r\n\r\n      <div className=\"container\">\r\n        <div className=\"row mt-4\">\r\n          <div className=\"col-9\">\r\n            <div className=\"row mb-4\">\r\n            <MovieTabs sort_by={this.state.sort_by}\r\n            updateSortBy={this.updateSortBy}/>\r\n            </div>\r\n            <div className=\"row\">\r\n              {this.state.movies.map(movie => {\r\n                return (\r\n                  <div className=\"col-6 mb-4\" key={movie.id}>\r\n                    <MovieItem\r\n                      data={movie}\r\n                      deleteMovie={this.deleteMovie}\r\n                      addMovieToWillWatch={this.addMovieToWillWatch}\r\n                      deleteMovieFromWillWatch={this.deleteMovieFromWillWatch}\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <h4>Will Watch: {this.state.moviesWillWatch.length} movies</h4>\r\n            <p>pagination: {this.state.page}</p>\r\n            <ul className=\"list-group\">\r\n              {this.state.moviesWillWatch.map(movie => (\r\n                <li key={movie.id} className=\"list-group-item\">\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <p>{movie.title}</p>\r\n                    <p>{movie.vote_average}</p>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          <Pages pages={this.state.page} total_page={this.state.total_page} updatePage={this.updatePage}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}